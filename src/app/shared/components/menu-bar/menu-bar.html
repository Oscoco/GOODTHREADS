<header class="sticky top-0 z-50 w-full bg-black border-white shadow-md">
  <div class="container mx-auto sm:px-2 px-6 h-16 flex items-center justify-between">



    <div class="flex items-center space-x-4">

      <button (click)="toggleMenu()" aria-label="Abrir menú"
        class="flex flex-col justify-center space-y-1.5 w-6 h-6 cursor-pointer">
        <span class="block w-6 h-0.5 bg-white rounded-full transition-all duration-300" [class.rotate-45]="isMenuOpen()"
          [class.translate-y-2]="isMenuOpen()">
        </span>
        <span class="block w-6 h-0.5 bg-white rounded-full transition-all duration-300"
          [class.opacity-0]="isMenuOpen()">
        </span>
        <span class="block w-6 h-0.5 bg-white rounded-full transition-all duration-300"
          [class.-rotate-45]="isMenuOpen()" [class.-translate-y-2]="isMenuOpen()">
        </span>
      </button>

      <button (click)="openSearch()"
        class="m-0 pt-2 hover:text-gray-300 transition-colors bg-transparent border-0 cursor-pointer">
        <i class='bx bx-search text-2xl text-white m-0 p-0'></i>
      </button>
    </div>

    <a routerLink="/" class="text-xl font-bold tracking-tighter text-white uppercase">
      GOODTHREADS
    </a>

    <button
      (click)="goToCart()"
      class="relative inline-flex items-center bg-white border-0 py-1 px-3 focus:outline-none hover:bg-gray-200 rounded text-base md:mt-0 text-black transition-all cursor-pointer group">
      <span class="hidden md:inline font-semibold">cart</span>
      <div class="relative">
        <i class='bx bx-cart text-xl md:ml-1 transition-transform group-hover:scale-110'></i>
        @if (totalItems() > 0) {
          <span class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold rounded-full h-5 min-w-[1.25rem] flex items-center justify-center px-1.5 shadow-lg transform transition-all duration-300 scale-100 group-hover:scale-110">
            {{ totalItems() > 99 ? '99+' : totalItems() }}
          </span>
        }
      </div>
    </button>

  </div>

  <!-- Side menu -->
  <div class="fixed inset-0 z-50 transition-opacity duration-300 ease-in-out" [class.opacity-0]="!isMenuOpen()"
    [class.pointer-events-none]="!isMenuOpen()" [class.opacity-100]="isMenuOpen()"
    [class.pointer-events-auto]="isMenuOpen()" (click)="closeMenu()">

    <div class="fixed inset-0 bg-black/50 transition-opacity duration-300 ease-in-out" [class.opacity-0]="!isMenuOpen()"
      [class.opacity-100]="isMenuOpen()">
    </div>

    <div
      class="fixed left-0 top-0 h-screen sm:w-100 w-80 bg-black text-white shadow-xl transform transition-transform duration-300 ease-in-out"
      [class.-translate-x-full]="!isMenuOpen()" [class.translate-x-0]="isMenuOpen()" (click)="$event.stopPropagation()">
      <div class="flex flex-col h-full">


        <nav class="flex-1 overflow-y-auto py-6 sm:text-2xl text-xl">
          <br>
          <a (click)="closeMenu()" class="block bar-hover">
            <i class='bx bx-arrow-back text-2xl'></i>
          </a>
          <a routerLink="/" (click)="closeMenu()" class="block bar-hover">Inicio</a>
          <a href="/thank-you" class="block bar-hover">Agradecimientos</a>
          <a href="/products" class="block bar-hover">Ravve™</a>
          <a href="/products" class="block bar-hover">drops™</a>
          <a href="/products" class="block bar-hover">packs™</a>
          <a href="/products" class="flex items-center justify-between bar-hover">
            <span>Anime</span>
            <i class='bx bx-chevron-right'></i>
          </a>
          <a href="/products" class="flex items-center justify-between bar-hover">
            <span>Artistas y Conciertos</span>
            <i class='bx bx-chevron-right'></i>
          </a>
          <a href="/products" class="flex items-center justify-between bar-hover">
            <span>Categorias</span>
            <i class='bx bx-chevron-right'></i>
          </a>
          <a href="/products" class="flex items-center justify-between bar-hover">
            <span>Complementos</span>
            <i class='bx bx-chevron-right'></i>
          </a>
        </nav>

        <div class="border-t border-gray-800 p-4">
          <div class="flex justify-center space-x-6">
            <a href="/products" aria-label="Facebook" class="text-white hover:text-gray-300 transition-colors">
              <i class='bx bxl-facebook text-2xl'></i>
            </a>
            <a href="/products" aria-label="Instagram" class="text-white hover:text-gray-300 transition-colors">
              <i class='bx bxl-instagram text-2xl'></i>
            </a>
            <a href="/products" aria-label="TikTok" class="text-white hover:text-gray-300 transition-colors">
              <i class='bx bxl-tiktok text-2xl'></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="fixed inset-0 z-[60] transition-opacity duration-300 ease-in-out" [class.opacity-0]="!isSearchOpen()"
    [class.pointer-events-none]="!isSearchOpen()" [class.opacity-100]="isSearchOpen()"
    [class.pointer-events-auto]="isSearchOpen()" (click)="closeSearch()">

    <div class="fixed inset-0 bg-black transition-opacity duration-300 ease-in-out"></div>

    <div class="fixed inset-0 flex items-center justify-center px-4" (click)="$event.stopPropagation()">
      <div class="relative w-full max-w-2xl">
        <div class="relative flex items-center">
          <input type="text" placeholder="Búsqueda" [value]="searchQuery()" (input)="onSearchChange($event)"
            (keydown.escape)="closeSearch()" autofocus
            class="w-full bg-black border border-white text-white pl-6 pr-20 py-4 text-lg focus:outline-none placeholder:text-white/70 [&::-webkit-search-cancel-button]:hidden [&::-webkit-search-decoration]:hidden">
          @if (searchQuery()) {
          <button (click)="clearSearch()"
            class="absolute right-4 text-white hover:text-gray-300 transition-colors bg-transparent border-0 cursor-pointer">
            <i class='bx bx-x text-white text-xl'></i>
          </button>
          }
          <i class='bx bx-search absolute right-12 text-white text-2xl pointer-events-none'></i>

        </div>
        <button (click)="closeSearch()"
          class="absolute -right-12 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-300 transition-colors text-2xl bg-transparent border-0 cursor-pointer">
          <i class='bx bx-x text-white text-2xl'></i>
        </button>
      </div>
    </div>
  </div>
</header>